# 机器人轨迹跟踪仿真系统

这是一个基于 PyBullet 的机器人轨迹跟踪仿真系统，实现了智能避障和轨迹跟踪功能。系统包含完整的 PID 控制器、激光雷达传感器和实时数据可视化功能。

## 项目特点

### 智能避障系统
- 多区域障碍物检测和分析
- 自适应避障策略
- 动态速度调整
- 多障碍物协同处理

### 轨迹跟踪
- 多种预定义轨迹（圆形、方形、8字形、螺旋形）
- 实时轨迹可视化
- 平滑的路径跟随
- 动态权重平衡

### 实时监控
- 位置误差显示
- 速度和转向数据图表
- 激光雷达可视化
- 障碍物距离监测

## 项目结构

```
robot_sim/
├── config/
│   └── config.yaml          # 配置文件
├── src/
│   ├── robot/
│   │   ├── car.py          # 小车模型
│   │   └── controller.py    # PID控制器和避障系统
│   ├── planner/
│   │   └── trajectory.py    # 轨迹规划器
│   ├── env/
│   │   └── environment.py   # 环境和障碍物管理
│   └── utils/
│       └── visualization.py # 可视化工具
└── main.py                  # 主程序
```

## 核心功能

### 1. 智能避障控制
- **多区域检测**：
  - 360度激光雷达扫描
  - 障碍物区域分析
  - 危险区域识别

- **自适应控制**：
  - 动态权重调整
  - 多障碍物协同处理
  - 安全距离保护

- **平滑运动**：
  - 渐进式速度调整
  - 平滑的转向控制
  - 避障-跟踪平衡

### 2. 环境模拟
- **动态障碍物**：
  - 随机运动障碍物
  - 可配置的运动参数
  - 碰撞边界处理

- **传感器模拟**：
  - 激光雷达扫描
  - 距离测量
  - 实时可视化

### 3. 可视化系统
- **实时数据图表**：
  - 位置误差跟踪
  - 速度监控
  - 转向角度显示

- **3D场景显示**：
  - 轨迹可视化
  - 障碍物显示
  - 激光雷达射线

## 配置说明

### 控制器参数
```yaml
controller:
  max_speed: 12.0        # 最大速度
  max_steering: 0.8      # 最大转向角度
  # 避障参数
  obstacle_avoidance:
    influence_distance: 4.0  # 探测距离
    safe_distance: 1.5      # 安全距离阈值
    obstacle_gain: 2.5      # 避障权重
    target_gain: 1.0        # 目标权重
    multi_obstacle_factor: 1.5  # 多障碍物影响因子
```

### 环境参数
```yaml
environment:
  num_obstacles: 3        # 障碍物数量
  obstacle_speed: 0.1     # 障碍物速度
  lidar_rays: 32         # 激光雷达射线数
  lidar_range: 5.0       # 探测范围
```

## 使用方法

1. 安装依赖：
```bash
pip install pybullet numpy pyyaml matplotlib scienceplots
```

2. 运行仿真：
```bash
python main.py
```

3. 控制说明：
   - 自动跟踪预定轨迹
   - 实时避障
   - 可通过配置文件调整参数

## 性能特点

1. **避障能力**：
   - 提前探测和规避
   - 多障碍物协同处理
   - 平滑的避障行为

2. **轨迹跟踪**：
   - 精确的路径跟随
   - 动态速度调整
   - 稳定的控制效果

3. **系统响应**：
   - 快速的避障反应
   - 平滑的运动控制
   - 实时的状态更新

## 后续开发计划

1. **控制系统增强**：
   - 模型预测控制
   - 自适应控制参数
   - 动力学约束

2. **环境扩展**：
   - 复杂地形支持
   - 动态目标跟踪
   - 多机器人协同

3. **可视化改进**：
   - 3D场景增强
   - 数据记录和回放
   - 性能分析工具

## 贡献指南

1. Fork 本仓库
2. 创建特性分支
3. 提交更改
4. 发起 Pull Request

## 许可证

[MIT License](LICENSE)

## 联系方式

- 作者：[您的名字]
- 邮箱：[您的邮箱]